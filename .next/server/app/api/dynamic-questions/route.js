"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/dynamic-questions/route";
exports.ids = ["app/api/dynamic-questions/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdynamic-questions%2Froute&page=%2Fapi%2Fdynamic-questions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamic-questions%2Froute.ts&appDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdynamic-questions%2Froute&page=%2Fapi%2Fdynamic-questions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamic-questions%2Froute.ts&appDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Lucas_Desktop_Workspace_V_ti_src_app_api_dynamic_questions_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/dynamic-questions/route.ts */ \"(rsc)/./src/app/api/dynamic-questions/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/dynamic-questions/route\",\n        pathname: \"/api/dynamic-questions\",\n        filename: \"route\",\n        bundlePath: \"app/api/dynamic-questions/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Lucas\\\\Desktop\\\\Workspace\\\\Vôti\\\\src\\\\app\\\\api\\\\dynamic-questions\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Lucas_Desktop_Workspace_V_ti_src_app_api_dynamic_questions_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/dynamic-questions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkeW5hbWljLXF1ZXN0aW9ucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZHluYW1pYy1xdWVzdGlvbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZkeW5hbWljLXF1ZXN0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNMdWNhcyU1Q0Rlc2t0b3AlNUNXb3Jrc3BhY2UlNUNWJUMzJUI0dGklNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0x1Y2FzJTVDRGVza3RvcCU1Q1dvcmtzcGFjZSU1Q1YlQzMlQjR0aSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDc0M7QUFDbkg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b3RpLz9mNmMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEx1Y2FzXFxcXERlc2t0b3BcXFxcV29ya3NwYWNlXFxcXFbDtHRpXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGR5bmFtaWMtcXVlc3Rpb25zXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9keW5hbWljLXF1ZXN0aW9ucy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2R5bmFtaWMtcXVlc3Rpb25zXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9keW5hbWljLXF1ZXN0aW9ucy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEx1Y2FzXFxcXERlc2t0b3BcXFxcV29ya3NwYWNlXFxcXFbDtHRpXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGR5bmFtaWMtcXVlc3Rpb25zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9keW5hbWljLXF1ZXN0aW9ucy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdynamic-questions%2Froute&page=%2Fapi%2Fdynamic-questions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamic-questions%2Froute.ts&appDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/dynamic-questions/route.ts":
/*!************************************************!*\
  !*** ./src/app/api/dynamic-questions/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_votingAnalyzer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/votingAnalyzer */ \"(rsc)/./src/lib/votingAnalyzer.ts\");\n\n\n// Cache global para evitar reprocessamento\nlet cachedAnalyzer = null;\nlet cachedQuestions = null;\nasync function GET() {\n    try {\n        // Inicializa analyzer se necessário\n        if (!cachedAnalyzer) {\n            cachedAnalyzer = new _lib_votingAnalyzer__WEBPACK_IMPORTED_MODULE_1__.VotingAnalyzer();\n            await cachedAnalyzer.loadVotingData();\n        }\n        // Gera perguntas se necessário\n        if (!cachedQuestions) {\n            const questions = [];\n            // Gera 5 questões dinâmicas\n            for(let i = 0; i < 5; i++){\n                try {\n                    const questionData = await cachedAnalyzer.generateDynamicQuestion();\n                    if (questionData) {\n                        questions.push(questionData);\n                    }\n                } catch (error) {\n                    console.warn(`Erro ao gerar questão ${i}:`, error);\n                }\n            }\n            cachedQuestions = questions;\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            questions: cachedQuestions\n        });\n    } catch (error) {\n        console.error(\"Erro ao gerar perguntas din\\xe2micas:\", error);\n        // Fallback: retorna perguntas fixas se algo der errado\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            questions: [\n                {\n                    id: \"salario-minimo\",\n                    originalProject: {\n                        id: \"PL 1886/2022\",\n                        title: \"Estabelece sal\\xe1rio m\\xednimo de R$ 1.500\",\n                        description: \"Proposta para aumentar o sal\\xe1rio m\\xednimo nacional para R$ 1.500\",\n                        author: \"Diversos\",\n                        party: \"\",\n                        state: \"\",\n                        date: \"2022\",\n                        status: \"Em tramita\\xe7\\xe3o\",\n                        link: \"\"\n                    },\n                    simplifiedQuestion: \"O sal\\xe1rio m\\xednimo hoje \\xe9 R$ 1.320. Na sua opini\\xe3o, deveria aumentar para R$ 1.500?\",\n                    options: {\n                        favor: \"\\uD83D\\uDC4D Com certeza! \\xc9 muito pouco para viver\",\n                        contra: \"\\uD83D\\uDC4E Melhor n\\xe3o mexer nisso agora\",\n                        abstencao: \"\\uD83E\\uDD37‍♂️ Hmm, n\\xe3o sei bem...\"\n                    },\n                    votingKey: \"salario-minimo\"\n                },\n                {\n                    id: \"meio-ambiente\",\n                    originalProject: {\n                        id: \"PL 2633/2020\",\n                        title: \"Prote\\xe7\\xe3o de terras ind\\xedgenas\",\n                        description: \"Estabelece diretrizes para prote\\xe7\\xe3o de povos ind\\xedgenas\",\n                        author: \"Diversos\",\n                        party: \"\",\n                        state: \"\",\n                        date: \"2020\",\n                        status: \"Em tramita\\xe7\\xe3o\",\n                        link: \"\"\n                    },\n                    simplifiedQuestion: \"Voc\\xea apoiaria proteger as terras ind\\xedgenas mesmo que isso limite um pouco o agroneg\\xf3cio?\",\n                    options: {\n                        favor: \"\\uD83C\\uDF31 Sim! Preservar \\xe9 fundamental\",\n                        contra: \"\\uD83D\\uDE9C N\\xe3o, agroneg\\xf3cio gera empregos\",\n                        abstencao: \"⚖️ \\xc9 complicado... preciso saber mais\"\n                    },\n                    votingKey: \"meio-ambiente\"\n                },\n                {\n                    id: \"impostos\",\n                    originalProject: {\n                        id: \"PEC 45/2019\",\n                        title: \"Imposto sobre Grandes Fortunas\",\n                        description: \"Institui imposto sobre patrim\\xf4nios superiores a R$ 20 milh\\xf5es\",\n                        author: \"Diversos\",\n                        party: \"\",\n                        state: \"\",\n                        date: \"2019\",\n                        status: \"Em tramita\\xe7\\xe3o\",\n                        link: \"\"\n                    },\n                    simplifiedQuestion: \"Se uma pessoa tem mais de R$ 20 milh\\xf5es, ela deveria pagar um imposto extra para ajudar em programas sociais?\",\n                    options: {\n                        favor: \"\\uD83D\\uDCB0 \\xd3bvio! Quem pode mais, contribui mais\",\n                        contra: \"\\uD83D\\uDCC8 N\\xe3o, isso afasta investimentos\",\n                        abstencao: \"\\uD83C\\uDFAF Depende muito de como seria feito\"\n                    },\n                    votingKey: \"impostos\"\n                }\n            ]\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const { answers } = await request.json();\n        if (!cachedAnalyzer) {\n            cachedAnalyzer = new _lib_votingAnalyzer__WEBPACK_IMPORTED_MODULE_1__.VotingAnalyzer();\n            await cachedAnalyzer.loadVotingData();\n        }\n        // Calcula afinidade com base nas respostas reais\n        const affinities = cachedAnalyzer.calculateAffinity(answers);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            affinities: affinities.slice(0, 20) // Top 20 deputados\n        });\n    } catch (error) {\n        console.error(\"Erro ao calcular afinidade:\", error);\n        // Fallback: gera afinidades simuladas\n        const mockAffinities = Array.from({\n            length: 20\n        }, (_, i)=>({\n                deputy: `Deputado ${i + 1}`,\n                party: [\n                    \"PT\",\n                    \"PSDB\",\n                    \"PL\",\n                    \"MDB\",\n                    \"PP\"\n                ][i % 5],\n                state: [\n                    \"SP\",\n                    \"RJ\",\n                    \"MG\",\n                    \"RS\",\n                    \"PR\"\n                ][i % 5],\n                affinity: Math.floor(Math.random() * 100),\n                agreements: Math.floor(Math.random() * 10),\n                disagreements: Math.floor(Math.random() * 5),\n                matches: {}\n            })).sort((a, b)=>b.affinity - a.affinity);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            affinities: mockAffinities\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9keW5hbWljLXF1ZXN0aW9ucy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQ0Y7QUFFdEQsMkNBQTJDO0FBQzNDLElBQUlFLGlCQUF3QztBQUM1QyxJQUFJQyxrQkFBZ0M7QUFFN0IsZUFBZUM7SUFDcEIsSUFBSTtRQUNGLG9DQUFvQztRQUNwQyxJQUFJLENBQUNGLGdCQUFnQjtZQUNuQkEsaUJBQWlCLElBQUlELCtEQUFjQTtZQUNuQyxNQUFNQyxlQUFlRyxjQUFjO1FBQ3JDO1FBRUEsK0JBQStCO1FBQy9CLElBQUksQ0FBQ0YsaUJBQWlCO1lBQ3BCLE1BQU1HLFlBQVksRUFBRTtZQUVwQiw0QkFBNEI7WUFDNUIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUksR0FBR0EsSUFBSztnQkFDMUIsSUFBSTtvQkFDRixNQUFNQyxlQUFlLE1BQU1OLGVBQWVPLHVCQUF1QjtvQkFDakUsSUFBSUQsY0FBYzt3QkFDaEJGLFVBQVVJLElBQUksQ0FBQ0Y7b0JBQ2pCO2dCQUNGLEVBQUUsT0FBT0csT0FBTztvQkFDZEMsUUFBUUMsSUFBSSxDQUFDLENBQUMsc0JBQXNCLEVBQUVOLEVBQUUsQ0FBQyxDQUFDLEVBQUVJO2dCQUM5QztZQUNGO1lBRUFSLGtCQUFrQkc7UUFDcEI7UUFFQSxPQUFPTixxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RULFdBQVdIO1FBQ2I7SUFFRixFQUFFLE9BQU9RLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHlDQUFzQ0E7UUFFcEQsdURBQXVEO1FBQ3ZELE9BQU9YLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVFQsV0FBVztnQkFDVDtvQkFDRVUsSUFBSTtvQkFDSkMsaUJBQWlCO3dCQUNmRCxJQUFJO3dCQUNKRSxPQUFPO3dCQUNQQyxhQUFhO3dCQUNiQyxRQUFRO3dCQUNSQyxPQUFPO3dCQUNQQyxPQUFPO3dCQUNQQyxNQUFNO3dCQUNOQyxRQUFRO3dCQUNSQyxNQUFNO29CQUNSO29CQUNBQyxvQkFBb0I7b0JBQ3BCQyxTQUFTO3dCQUNQQyxPQUFPO3dCQUNQQyxRQUFRO3dCQUNSQyxXQUFXO29CQUNiO29CQUNBQyxXQUFXO2dCQUNiO2dCQUNBO29CQUNFZixJQUFJO29CQUNKQyxpQkFBaUI7d0JBQ2ZELElBQUk7d0JBQ0pFLE9BQU87d0JBQ1BDLGFBQWE7d0JBQ2JDLFFBQVE7d0JBQ1JDLE9BQU87d0JBQ1BDLE9BQU87d0JBQ1BDLE1BQU07d0JBQ05DLFFBQVE7d0JBQ1JDLE1BQU07b0JBQ1I7b0JBQ0FDLG9CQUFvQjtvQkFDcEJDLFNBQVM7d0JBQ1BDLE9BQU87d0JBQ1BDLFFBQVE7d0JBQ1JDLFdBQVc7b0JBQ2I7b0JBQ0FDLFdBQVc7Z0JBQ2I7Z0JBQ0E7b0JBQ0VmLElBQUk7b0JBQ0pDLGlCQUFpQjt3QkFDZkQsSUFBSTt3QkFDSkUsT0FBTzt3QkFDUEMsYUFBYTt3QkFDYkMsUUFBUTt3QkFDUkMsT0FBTzt3QkFDUEMsT0FBTzt3QkFDUEMsTUFBTTt3QkFDTkMsUUFBUTt3QkFDUkMsTUFBTTtvQkFDUjtvQkFDQUMsb0JBQW9CO29CQUNwQkMsU0FBUzt3QkFDUEMsT0FBTzt3QkFDUEMsUUFBUTt3QkFDUkMsV0FBVztvQkFDYjtvQkFDQUMsV0FBVztnQkFDYjthQUNEO1FBQ0g7SUFDRjtBQUNGO0FBRU8sZUFBZUMsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUcsTUFBTUQsUUFBUW5CLElBQUk7UUFFdEMsSUFBSSxDQUFDWixnQkFBZ0I7WUFDbkJBLGlCQUFpQixJQUFJRCwrREFBY0E7WUFDbkMsTUFBTUMsZUFBZUcsY0FBYztRQUNyQztRQUVBLGlEQUFpRDtRQUNqRCxNQUFNOEIsYUFBYWpDLGVBQWVrQyxpQkFBaUIsQ0FBQ0Y7UUFFcEQsT0FBT2xDLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVG9CLFlBQVlBLFdBQVdFLEtBQUssQ0FBQyxHQUFHLElBQUksbUJBQW1CO1FBQ3pEO0lBRUYsRUFBRSxPQUFPMUIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsK0JBQStCQTtRQUU3QyxzQ0FBc0M7UUFDdEMsTUFBTTJCLGlCQUFpQkMsTUFBTUMsSUFBSSxDQUFDO1lBQUVDLFFBQVE7UUFBRyxHQUFHLENBQUNDLEdBQUduQyxJQUFPO2dCQUMzRG9DLFFBQVEsQ0FBQyxTQUFTLEVBQUVwQyxJQUFJLEVBQUUsQ0FBQztnQkFDM0JjLE9BQU87b0JBQUM7b0JBQU07b0JBQVE7b0JBQU07b0JBQU87aUJBQUssQ0FBQ2QsSUFBSSxFQUFFO2dCQUMvQ2UsT0FBTztvQkFBQztvQkFBTTtvQkFBTTtvQkFBTTtvQkFBTTtpQkFBSyxDQUFDZixJQUFJLEVBQUU7Z0JBQzVDcUMsVUFBVUMsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUs7Z0JBQ3JDQyxZQUFZSCxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSztnQkFDdkNFLGVBQWVKLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLO2dCQUMxQ0csU0FBUyxDQUFDO1lBQ1osSUFBSUMsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUVULFFBQVEsR0FBR1EsRUFBRVIsUUFBUTtRQUUxQyxPQUFPNUMscURBQVlBLENBQUNjLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUb0IsWUFBWUc7UUFDZDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b3RpLy4vc3JjL2FwcC9hcGkvZHluYW1pYy1xdWVzdGlvbnMvcm91dGUudHM/OTczNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBWb3RpbmdBbmFseXplciB9IGZyb20gJ0AvbGliL3ZvdGluZ0FuYWx5emVyJztcclxuXHJcbi8vIENhY2hlIGdsb2JhbCBwYXJhIGV2aXRhciByZXByb2Nlc3NhbWVudG9cclxubGV0IGNhY2hlZEFuYWx5emVyOiBWb3RpbmdBbmFseXplciB8IG51bGwgPSBudWxsO1xyXG5sZXQgY2FjaGVkUXVlc3Rpb25zOiBhbnlbXSB8IG51bGwgPSBudWxsO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICB0cnkge1xyXG4gICAgLy8gSW5pY2lhbGl6YSBhbmFseXplciBzZSBuZWNlc3PDoXJpb1xyXG4gICAgaWYgKCFjYWNoZWRBbmFseXplcikge1xyXG4gICAgICBjYWNoZWRBbmFseXplciA9IG5ldyBWb3RpbmdBbmFseXplcigpO1xyXG4gICAgICBhd2FpdCBjYWNoZWRBbmFseXplci5sb2FkVm90aW5nRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlcmEgcGVyZ3VudGFzIHNlIG5lY2Vzc8OhcmlvXHJcbiAgICBpZiAoIWNhY2hlZFF1ZXN0aW9ucykge1xyXG4gICAgICBjb25zdCBxdWVzdGlvbnMgPSBbXTtcclxuICAgICAgXHJcbiAgICAgIC8vIEdlcmEgNSBxdWVzdMO1ZXMgZGluw6JtaWNhc1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBxdWVzdGlvbkRhdGEgPSBhd2FpdCBjYWNoZWRBbmFseXplci5nZW5lcmF0ZUR5bmFtaWNRdWVzdGlvbigpO1xyXG4gICAgICAgICAgaWYgKHF1ZXN0aW9uRGF0YSkge1xyXG4gICAgICAgICAgICBxdWVzdGlvbnMucHVzaChxdWVzdGlvbkRhdGEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEVycm8gYW8gZ2VyYXIgcXVlc3TDo28gJHtpfTpgLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjYWNoZWRRdWVzdGlvbnMgPSBxdWVzdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgcXVlc3Rpb25zOiBjYWNoZWRRdWVzdGlvbnNcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJybyBhbyBnZXJhciBwZXJndW50YXMgZGluw6JtaWNhczonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIC8vIEZhbGxiYWNrOiByZXRvcm5hIHBlcmd1bnRhcyBmaXhhcyBzZSBhbGdvIGRlciBlcnJhZG9cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHF1ZXN0aW9uczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiBcInNhbGFyaW8tbWluaW1vXCIsXHJcbiAgICAgICAgICBvcmlnaW5hbFByb2plY3Q6IHtcclxuICAgICAgICAgICAgaWQ6IFwiUEwgMTg4Ni8yMDIyXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIkVzdGFiZWxlY2Ugc2Fsw6FyaW8gbcOtbmltbyBkZSBSJCAxLjUwMFwiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJQcm9wb3N0YSBwYXJhIGF1bWVudGFyIG8gc2Fsw6FyaW8gbcOtbmltbyBuYWNpb25hbCBwYXJhIFIkIDEuNTAwXCIsXHJcbiAgICAgICAgICAgIGF1dGhvcjogXCJEaXZlcnNvc1wiLFxyXG4gICAgICAgICAgICBwYXJ0eTogXCJcIixcclxuICAgICAgICAgICAgc3RhdGU6IFwiXCIsXHJcbiAgICAgICAgICAgIGRhdGU6IFwiMjAyMlwiLFxyXG4gICAgICAgICAgICBzdGF0dXM6IFwiRW0gdHJhbWl0YcOnw6NvXCIsXHJcbiAgICAgICAgICAgIGxpbms6IFwiXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzaW1wbGlmaWVkUXVlc3Rpb246IFwiTyBzYWzDoXJpbyBtw61uaW1vIGhvamUgw6kgUiQgMS4zMjAuIE5hIHN1YSBvcGluacOjbywgZGV2ZXJpYSBhdW1lbnRhciBwYXJhIFIkIDEuNTAwP1wiLFxyXG4gICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICBmYXZvcjogXCLwn5GNIENvbSBjZXJ0ZXphISDDiSBtdWl0byBwb3VjbyBwYXJhIHZpdmVyXCIsXHJcbiAgICAgICAgICAgIGNvbnRyYTogXCLwn5GOIE1lbGhvciBuw6NvIG1leGVyIG5pc3NvIGFnb3JhXCIsXHJcbiAgICAgICAgICAgIGFic3RlbmNhbzogXCLwn6S34oCN4pmC77iPIEhtbSwgbsOjbyBzZWkgYmVtLi4uXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2b3RpbmdLZXk6IFwic2FsYXJpby1taW5pbW9cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6IFwibWVpby1hbWJpZW50ZVwiLFxyXG4gICAgICAgICAgb3JpZ2luYWxQcm9qZWN0OiB7XHJcbiAgICAgICAgICAgIGlkOiBcIlBMIDI2MzMvMjAyMFwiLFxyXG4gICAgICAgICAgICB0aXRsZTogXCJQcm90ZcOnw6NvIGRlIHRlcnJhcyBpbmTDrWdlbmFzXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkVzdGFiZWxlY2UgZGlyZXRyaXplcyBwYXJhIHByb3Rlw6fDo28gZGUgcG92b3MgaW5kw61nZW5hc1wiLFxyXG4gICAgICAgICAgICBhdXRob3I6IFwiRGl2ZXJzb3NcIixcclxuICAgICAgICAgICAgcGFydHk6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YXRlOiBcIlwiLFxyXG4gICAgICAgICAgICBkYXRlOiBcIjIwMjBcIixcclxuICAgICAgICAgICAgc3RhdHVzOiBcIkVtIHRyYW1pdGHDp8Ojb1wiLFxyXG4gICAgICAgICAgICBsaW5rOiBcIlwiXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgc2ltcGxpZmllZFF1ZXN0aW9uOiBcIlZvY8OqIGFwb2lhcmlhIHByb3RlZ2VyIGFzIHRlcnJhcyBpbmTDrWdlbmFzIG1lc21vIHF1ZSBpc3NvIGxpbWl0ZSB1bSBwb3VjbyBvIGFncm9uZWfDs2Npbz9cIixcclxuICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgZmF2b3I6IFwi8J+MsSBTaW0hIFByZXNlcnZhciDDqSBmdW5kYW1lbnRhbFwiLFxyXG4gICAgICAgICAgICBjb250cmE6IFwi8J+anCBOw6NvLCBhZ3JvbmVnw7NjaW8gZ2VyYSBlbXByZWdvc1wiLFxyXG4gICAgICAgICAgICBhYnN0ZW5jYW86IFwi4pqW77iPIMOJIGNvbXBsaWNhZG8uLi4gcHJlY2lzbyBzYWJlciBtYWlzXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2b3RpbmdLZXk6IFwibWVpby1hbWJpZW50ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCJpbXBvc3Rvc1wiLFxyXG4gICAgICAgICAgb3JpZ2luYWxQcm9qZWN0OiB7XHJcbiAgICAgICAgICAgIGlkOiBcIlBFQyA0NS8yMDE5XCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIkltcG9zdG8gc29icmUgR3JhbmRlcyBGb3J0dW5hc1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbnN0aXR1aSBpbXBvc3RvIHNvYnJlIHBhdHJpbcO0bmlvcyBzdXBlcmlvcmVzIGEgUiQgMjAgbWlsaMO1ZXNcIixcclxuICAgICAgICAgICAgYXV0aG9yOiBcIkRpdmVyc29zXCIsXHJcbiAgICAgICAgICAgIHBhcnR5OiBcIlwiLFxyXG4gICAgICAgICAgICBzdGF0ZTogXCJcIixcclxuICAgICAgICAgICAgZGF0ZTogXCIyMDE5XCIsXHJcbiAgICAgICAgICAgIHN0YXR1czogXCJFbSB0cmFtaXRhw6fDo29cIixcclxuICAgICAgICAgICAgbGluazogXCJcIlxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNpbXBsaWZpZWRRdWVzdGlvbjogXCJTZSB1bWEgcGVzc29hIHRlbSBtYWlzIGRlIFIkIDIwIG1pbGjDtWVzLCBlbGEgZGV2ZXJpYSBwYWdhciB1bSBpbXBvc3RvIGV4dHJhIHBhcmEgYWp1ZGFyIGVtIHByb2dyYW1hcyBzb2NpYWlzP1wiLFxyXG4gICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICBmYXZvcjogXCLwn5KwIMOTYnZpbyEgUXVlbSBwb2RlIG1haXMsIGNvbnRyaWJ1aSBtYWlzXCIsXHJcbiAgICAgICAgICAgIGNvbnRyYTogXCLwn5OIIE7Do28sIGlzc28gYWZhc3RhIGludmVzdGltZW50b3NcIixcclxuICAgICAgICAgICAgYWJzdGVuY2FvOiBcIvCfjq8gRGVwZW5kZSBtdWl0byBkZSBjb21vIHNlcmlhIGZlaXRvXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2b3RpbmdLZXk6IFwiaW1wb3N0b3NcIlxyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGFuc3dlcnMgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgXHJcbiAgICBpZiAoIWNhY2hlZEFuYWx5emVyKSB7XHJcbiAgICAgIGNhY2hlZEFuYWx5emVyID0gbmV3IFZvdGluZ0FuYWx5emVyKCk7XHJcbiAgICAgIGF3YWl0IGNhY2hlZEFuYWx5emVyLmxvYWRWb3RpbmdEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYSBhZmluaWRhZGUgY29tIGJhc2UgbmFzIHJlc3Bvc3RhcyByZWFpc1xyXG4gICAgY29uc3QgYWZmaW5pdGllcyA9IGNhY2hlZEFuYWx5emVyLmNhbGN1bGF0ZUFmZmluaXR5KGFuc3dlcnMpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBhZmZpbml0aWVzOiBhZmZpbml0aWVzLnNsaWNlKDAsIDIwKSAvLyBUb3AgMjAgZGVwdXRhZG9zXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gY2FsY3VsYXIgYWZpbmlkYWRlOicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgLy8gRmFsbGJhY2s6IGdlcmEgYWZpbmlkYWRlcyBzaW11bGFkYXNcclxuICAgIGNvbnN0IG1vY2tBZmZpbml0aWVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+ICh7XHJcbiAgICAgIGRlcHV0eTogYERlcHV0YWRvICR7aSArIDF9YCxcclxuICAgICAgcGFydHk6IFsnUFQnLCAnUFNEQicsICdQTCcsICdNREInLCAnUFAnXVtpICUgNV0sXHJcbiAgICAgIHN0YXRlOiBbJ1NQJywgJ1JKJywgJ01HJywgJ1JTJywgJ1BSJ11baSAlIDVdLFxyXG4gICAgICBhZmZpbml0eTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSxcclxuICAgICAgYWdyZWVtZW50czogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApLFxyXG4gICAgICBkaXNhZ3JlZW1lbnRzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSxcclxuICAgICAgbWF0Y2hlczoge31cclxuICAgIH0pKS5zb3J0KChhLCBiKSA9PiBiLmFmZmluaXR5IC0gYS5hZmZpbml0eSk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgYWZmaW5pdGllczogbW9ja0FmZmluaXRpZXNcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiVm90aW5nQW5hbHl6ZXIiLCJjYWNoZWRBbmFseXplciIsImNhY2hlZFF1ZXN0aW9ucyIsIkdFVCIsImxvYWRWb3RpbmdEYXRhIiwicXVlc3Rpb25zIiwiaSIsInF1ZXN0aW9uRGF0YSIsImdlbmVyYXRlRHluYW1pY1F1ZXN0aW9uIiwicHVzaCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJqc29uIiwic3VjY2VzcyIsImlkIiwib3JpZ2luYWxQcm9qZWN0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImF1dGhvciIsInBhcnR5Iiwic3RhdGUiLCJkYXRlIiwic3RhdHVzIiwibGluayIsInNpbXBsaWZpZWRRdWVzdGlvbiIsIm9wdGlvbnMiLCJmYXZvciIsImNvbnRyYSIsImFic3RlbmNhbyIsInZvdGluZ0tleSIsIlBPU1QiLCJyZXF1ZXN0IiwiYW5zd2VycyIsImFmZmluaXRpZXMiLCJjYWxjdWxhdGVBZmZpbml0eSIsInNsaWNlIiwibW9ja0FmZmluaXRpZXMiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJfIiwiZGVwdXR5IiwiYWZmaW5pdHkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhZ3JlZW1lbnRzIiwiZGlzYWdyZWVtZW50cyIsIm1hdGNoZXMiLCJzb3J0IiwiYSIsImIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/dynamic-questions/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/votingAnalyzer.ts":
/*!***********************************!*\
  !*** ./src/lib/votingAnalyzer.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VotingAnalyzer: () => (/* binding */ VotingAnalyzer)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass VotingAnalyzer {\n    // Carrega dados de votações do CSV\n    async loadVotingData() {\n        try {\n            const csvPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"images\", \"politicians\", \"deputies\", \"votacoes deputados - 2022 a 2025.csv\");\n            const csvContent = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(csvPath, \"utf-8\");\n            const lines = csvContent.split(\"\\n\").filter((line)=>line.trim());\n            const headers = lines[0].split(\",\").map((h)=>h.trim().replace(/\"/g, \"\"));\n            // Mapear dados\n            this.votingData = [];\n            for(let i = 1; i < lines.length; i++){\n                const columns = this.parseCSVLine(lines[i]);\n                if (columns.length < 2) continue;\n                const deputy = columns[0]?.replace(/\"/g, \"\") || \"\";\n                if (!deputy) continue;\n                const votes = {};\n                // Mapear votos para cada questão\n                for(let j = 1; j < Math.min(columns.length, headers.length); j++){\n                    const questionKey = headers[j];\n                    const vote = columns[j]?.replace(/\"/g, \"\") || \"\";\n                    if (questionKey && vote) {\n                        votes[questionKey] = vote;\n                    }\n                }\n                this.votingData.push({\n                    deputy,\n                    votes\n                });\n            }\n            console.log(`Dados carregados: ${this.votingData.length} deputados`);\n        } catch (error) {\n            console.error(\"Erro ao carregar dados:\", error);\n            this.votingData = [];\n        }\n    }\n    // Parse manual de linha CSV (considerando vírgulas dentro de aspas)\n    parseCSVLine(line) {\n        const result = [];\n        let current = \"\";\n        let insideQuotes = false;\n        for(let i = 0; i < line.length; i++){\n            const char = line[i];\n            if (char === '\"') {\n                insideQuotes = !insideQuotes;\n            } else if (char === \",\" && !insideQuotes) {\n                result.push(current.trim());\n                current = \"\";\n            } else {\n                current += char;\n            }\n        }\n        result.push(current.trim());\n        return result;\n    }\n    // Obtém questões disponíveis para o questionário\n    getAvailableQuestions() {\n        if (this.votingData.length === 0) return [];\n        const allQuestions = new Set();\n        for (const record of this.votingData){\n            Object.keys(record.votes).forEach((question)=>{\n                if (question && question.trim()) {\n                    allQuestions.add(question);\n                }\n            });\n        }\n        return Array.from(allQuestions).filter((q)=>q.length > 10 && // Filtra questões muito curtas\n            !q.toLowerCase().includes(\"total\") // Remove colunas de totais\n        ).slice(0, 20); // Limita a 20 questões\n    }\n    // Gera uma questão dinâmica baseada em dados reais\n    async generateDynamicQuestion() {\n        const availableQuestions = this.getAvailableQuestions();\n        if (availableQuestions.length === 0) return null;\n        // Seleciona uma questão aleatória\n        const randomIndex = Math.floor(Math.random() * availableQuestions.length);\n        const projectKey = availableQuestions[randomIndex];\n        // Busca detalhes do projeto\n        const projectDetails = await this.getProjectDetails(projectKey);\n        if (!projectDetails) return null;\n        try {\n            // Usa API de LLM para simplificar\n            const simplifiedData = await this.callLLMForSimplification(projectDetails);\n            return {\n                id: projectDetails.id,\n                originalProject: projectDetails,\n                simplifiedQuestion: simplifiedData.question,\n                options: simplifiedData.options,\n                votingKey: projectKey\n            };\n        } catch (error) {\n            console.error(\"Erro ao simplificar projeto:\", error);\n            // Fallback: simplificação básica\n            return {\n                id: projectDetails.id,\n                originalProject: projectDetails,\n                simplifiedQuestion: this.createBasicQuestion(projectDetails),\n                options: {\n                    favor: \"\\uD83D\\uDC4D Sou a favor desta proposta\",\n                    contra: \"\\uD83D\\uDC4E Sou contra esta proposta\",\n                    abstencao: \"\\uD83E\\uDD37‍♂️ N\\xe3o tenho certeza sobre esta quest\\xe3o\"\n                },\n                votingKey: projectKey\n            };\n        }\n    }\n    // Chama API de LLM para simplificação\n    async callLLMForSimplification(project) {\n        const prompt = `\r\nVocê é um assistente que simplifica projetos de lei brasileiros para o público geral.\r\n\r\nPROJETO:\r\nTítulo: ${project.title}\r\nDescrição: ${project.description}\r\nAutor: ${project.author} (${project.party}/${project.state})\r\n\r\nTAREFA:\r\n1. Transforme este projeto em uma pergunta simples e clara que qualquer cidadão entenda\r\n2. Crie 3 opções de resposta: a favor, contra e abstenção\r\n\r\nREGRAS:\r\n- Use linguagem coloquial e acessível\r\n- Foque no impacto real na vida das pessoas\r\n- Mantenha neutralidade política\r\n- Seja objetivo e direto\r\n\r\nFORMATO DE RESPOSTA (JSON):\r\n{\r\n  \"question\": \"pergunta clara e simples\",\r\n  \"options\": {\r\n    \"favor\": \"descrição da opção a favor\",\r\n    \"contra\": \"descrição da opção contra\", \r\n    \"abstencao\": \"descrição da opção de abstenção\"\r\n  }\r\n}\r\n`;\n        const apis = [\n            ()=>this.callDeepSeekAPI(prompt),\n            ()=>this.callHuggingFaceAPI(prompt),\n            ()=>this.callOpenAIAPI(prompt),\n            ()=>this.callGeminiAPI(prompt)\n        ];\n        for (const apiCall of apis){\n            try {\n                console.log(\"Tentando API de simplifica\\xe7\\xe3o...\");\n                const result = await apiCall();\n                return result;\n            } catch (error) {\n                console.log(\"API call failed, trying next:\", error);\n                continue;\n            }\n        }\n        throw new Error(\"Todas as APIs de LLM falharam\");\n    }\n    // API DeepSeek\n    async callDeepSeekAPI(prompt) {\n        const apiKey = process.env.DEEPSEEK_API_KEY;\n        if (!apiKey) {\n            throw new Error(\"DeepSeek API not configured\");\n        }\n        const response = await fetch(\"https://api.deepseek.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${apiKey}`\n            },\n            body: JSON.stringify({\n                model: \"deepseek-chat\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 500\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`DeepSeek API failed: ${response.status}`);\n        }\n        const data = await response.json();\n        const content = data.choices[0].message.content;\n        try {\n            return JSON.parse(content);\n        } catch  {\n            // Se não for JSON válido, extrair informações\n            return {\n                question: content.split(\"\\n\")[0] || \"Pergunta sobre projeto de lei\",\n                options: {\n                    favor: \"Sou a favor desta proposta\",\n                    contra: \"Sou contra esta proposta\",\n                    abstencao: \"N\\xe3o tenho certeza sobre esta quest\\xe3o\"\n                }\n            };\n        }\n    }\n    // API do Hugging Face (gratuita)\n    async callHuggingFaceAPI(prompt) {\n        const response = await fetch(\"https://api-inference.huggingface.co/models/microsoft/DialoGPT-large\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": \"Bearer hf_demo\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                inputs: prompt,\n                options: {\n                    wait_for_model: true\n                }\n            })\n        });\n        if (!response.ok) throw new Error(\"Hugging Face API failed\");\n        const data = await response.json();\n        // Parse da resposta e extração do JSON\n        try {\n            const text = data[0]?.generated_text || \"\";\n            const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                return JSON.parse(jsonMatch[0]);\n            }\n        } catch (error) {\n            throw new Error(\"Failed to parse Hugging Face response\");\n        }\n        throw new Error(\"No valid response from Hugging Face\");\n    }\n    // API do OpenAI (tem tier gratuito)\n    async callOpenAIAPI(prompt) {\n        // Implementar quando tiver chave da API\n        throw new Error(\"OpenAI API not configured\");\n    }\n    // API do Google Gemini (gratuita)\n    async callGeminiAPI(prompt) {\n        // Implementar quando tiver chave da API\n        throw new Error(\"Gemini API not configured\");\n    }\n    // Busca detalhes de um projeto (mockado por enquanto)\n    async getProjectDetails(projectKey) {\n        // Por enquanto, gera detalhes básicos baseados na chave\n        return {\n            id: this.extractProjectId(projectKey),\n            title: this.extractProjectTitle(projectKey),\n            description: `Projeto de lei: ${projectKey}`,\n            author: \"Deputado(a)\",\n            party: \"Partido\",\n            state: \"Estado\",\n            date: new Date().toISOString().split(\"T\")[0],\n            status: \"Em tramita\\xe7\\xe3o\",\n            link: \"\"\n        };\n    }\n    // Extrai ID do projeto da chave de votação\n    extractProjectId(votingKey) {\n        const match = votingKey.match(/(?:PL|PLP|PEC|MPV|PDL)\\s*[NºN°]\\s*(\\d+\\/\\d+)/i);\n        return match ? match[0] : votingKey.substring(0, 50);\n    }\n    // Extrai título do projeto da chave de votação\n    extractProjectTitle(votingKey) {\n        // Remove data e timestamps\n        let title = votingKey.replace(/^\\d{2}\\/\\d{2}\\/\\d{4}\\s+\\d{2}:\\d{2}:\\d{2}\\s+-\\s+/, \"\");\n        // Limita tamanho\n        if (title.length > 100) {\n            title = title.substring(0, 97) + \"...\";\n        }\n        return title;\n    }\n    // Cria pergunta básica sem LLM\n    createBasicQuestion(project) {\n        const title = project.title || project.id;\n        if (title.toLowerCase().includes(\"sal\\xe1rio\")) {\n            return \"Voc\\xea \\xe9 a favor de aumentar o sal\\xe1rio m\\xednimo?\";\n        } else if (title.toLowerCase().includes(\"educa\\xe7\\xe3o\")) {\n            return \"Voc\\xea apoia investimentos em educa\\xe7\\xe3o?\";\n        } else if (title.toLowerCase().includes(\"sa\\xfade\")) {\n            return \"Voc\\xea \\xe9 a favor de mais recursos para a sa\\xfade?\";\n        } else if (title.toLowerCase().includes(\"imposto\")) {\n            return \"Voc\\xea concorda com mudan\\xe7as nos impostos?\";\n        } else {\n            return `Você é a favor da proposta: ${title.substring(0, 80)}${title.length > 80 ? \"...\" : \"\"}?`;\n        }\n    }\n    // Calcula afinidade do usuário com deputados\n    calculateAffinity(userAnswers) {\n        const results = [];\n        for (const deputyRecord of this.votingData){\n            let agreements = 0;\n            let disagreements = 0;\n            let totalComparisons = 0;\n            const matches = {};\n            for (const [questionId, userAnswer] of Object.entries(userAnswers)){\n                const deputyVote = deputyRecord.votes[questionId];\n                if (!deputyVote || deputyVote === \"N\\xe3o votou\") continue;\n                totalComparisons++;\n                let isAgreement = false;\n                if (userAnswer === \"favor\" && deputyVote === \"Sim\") {\n                    isAgreement = true;\n                } else if (userAnswer === \"contra\" && deputyVote === \"N\\xe3o\") {\n                    isAgreement = true;\n                } else if (userAnswer === \"abstencao\" && (deputyVote === \"Absten\\xe7\\xe3o\" || deputyVote === \"Obstru\\xe7\\xe3o\")) {\n                    isAgreement = true;\n                }\n                if (isAgreement) {\n                    agreements++;\n                } else {\n                    disagreements++;\n                }\n                matches[questionId] = isAgreement;\n            }\n            const affinity = totalComparisons > 0 ? agreements / totalComparisons * 100 : 0;\n            // Busca informações do deputado\n            const deputyInfo = this.getDeputyInfo(deputyRecord.deputy);\n            results.push({\n                deputy: deputyRecord.deputy,\n                party: deputyInfo?.party || \"\",\n                state: deputyInfo?.state || \"\",\n                affinity: Math.round(affinity),\n                agreements,\n                disagreements,\n                matches\n            });\n        }\n        return results.sort((a, b)=>b.affinity - a.affinity);\n    }\n    // Busca informações do deputado\n    getDeputyInfo(deputyName) {\n        // Implementar busca nos dados dos deputados\n        // Por enquanto retorna vazio\n        return null;\n    }\n    constructor(){\n        this.votingData = [];\n        this.projectsData = [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ZvdGluZ0FuYWx5emVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW9DO0FBQ1o7QUF5Q2pCLE1BQU1HO0lBSVgsbUNBQW1DO0lBQ25DLE1BQU1DLGlCQUFnQztRQUNwQyxJQUFJO1lBQ0YsTUFBTUMsVUFBVUgsZ0RBQVMsQ0FBQ0ssUUFBUUMsR0FBRyxJQUFJLFVBQVUsVUFBVSxlQUFlLFlBQVk7WUFDeEYsTUFBTUMsYUFBYSxNQUFNUix3Q0FBRUEsQ0FBQ1MsUUFBUSxDQUFDTCxTQUFTO1lBRTlDLE1BQU1NLFFBQVFGLFdBQVdHLEtBQUssQ0FBQyxNQUFNQyxNQUFNLENBQUNDLENBQUFBLE9BQVFBLEtBQUtDLElBQUk7WUFDN0QsTUFBTUMsVUFBVUwsS0FBSyxDQUFDLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUtLLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUgsSUFBSSxHQUFHSSxPQUFPLENBQUMsTUFBTTtZQUVwRSxlQUFlO1lBQ2YsSUFBSSxDQUFDQyxVQUFVLEdBQUcsRUFBRTtZQUVwQixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVYsTUFBTVcsTUFBTSxFQUFFRCxJQUFLO2dCQUNyQyxNQUFNRSxVQUFVLElBQUksQ0FBQ0MsWUFBWSxDQUFDYixLQUFLLENBQUNVLEVBQUU7Z0JBQzFDLElBQUlFLFFBQVFELE1BQU0sR0FBRyxHQUFHO2dCQUV4QixNQUFNRyxTQUFTRixPQUFPLENBQUMsRUFBRSxFQUFFSixRQUFRLE1BQU0sT0FBTztnQkFDaEQsSUFBSSxDQUFDTSxRQUFRO2dCQUViLE1BQU1DLFFBQWdDLENBQUM7Z0JBRXZDLGlDQUFpQztnQkFDakMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlDLEtBQUtDLEdBQUcsQ0FBQ04sUUFBUUQsTUFBTSxFQUFFTixRQUFRTSxNQUFNLEdBQUdLLElBQUs7b0JBQ2pFLE1BQU1HLGNBQWNkLE9BQU8sQ0FBQ1csRUFBRTtvQkFDOUIsTUFBTUksT0FBT1IsT0FBTyxDQUFDSSxFQUFFLEVBQUVSLFFBQVEsTUFBTSxPQUFPO29CQUM5QyxJQUFJVyxlQUFlQyxNQUFNO3dCQUN2QkwsS0FBSyxDQUFDSSxZQUFZLEdBQUdDO29CQUN2QjtnQkFDRjtnQkFFQSxJQUFJLENBQUNYLFVBQVUsQ0FBQ1ksSUFBSSxDQUFDO29CQUNuQlA7b0JBQ0FDO2dCQUNGO1lBQ0Y7WUFFQU8sUUFBUUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDZCxVQUFVLENBQUNFLE1BQU0sQ0FBQyxVQUFVLENBQUM7UUFFckUsRUFBRSxPQUFPYSxPQUFPO1lBQ2RGLFFBQVFFLEtBQUssQ0FBQywyQkFBMkJBO1lBQ3pDLElBQUksQ0FBQ2YsVUFBVSxHQUFHLEVBQUU7UUFDdEI7SUFDRjtJQUVBLG9FQUFvRTtJQUM1REksYUFBYVYsSUFBWSxFQUFZO1FBQzNDLE1BQU1zQixTQUFtQixFQUFFO1FBQzNCLElBQUlDLFVBQVU7UUFDZCxJQUFJQyxlQUFlO1FBRW5CLElBQUssSUFBSWpCLElBQUksR0FBR0EsSUFBSVAsS0FBS1EsTUFBTSxFQUFFRCxJQUFLO1lBQ3BDLE1BQU1rQixPQUFPekIsSUFBSSxDQUFDTyxFQUFFO1lBRXBCLElBQUlrQixTQUFTLEtBQUs7Z0JBQ2hCRCxlQUFlLENBQUNBO1lBQ2xCLE9BQU8sSUFBSUMsU0FBUyxPQUFPLENBQUNELGNBQWM7Z0JBQ3hDRixPQUFPSixJQUFJLENBQUNLLFFBQVF0QixJQUFJO2dCQUN4QnNCLFVBQVU7WUFDWixPQUFPO2dCQUNMQSxXQUFXRTtZQUNiO1FBQ0Y7UUFFQUgsT0FBT0osSUFBSSxDQUFDSyxRQUFRdEIsSUFBSTtRQUN4QixPQUFPcUI7SUFDVDtJQUVBLGlEQUFpRDtJQUNqREksd0JBQWtDO1FBQ2hDLElBQUksSUFBSSxDQUFDcEIsVUFBVSxDQUFDRSxNQUFNLEtBQUssR0FBRyxPQUFPLEVBQUU7UUFFM0MsTUFBTW1CLGVBQWUsSUFBSUM7UUFFekIsS0FBSyxNQUFNQyxVQUFVLElBQUksQ0FBQ3ZCLFVBQVUsQ0FBRTtZQUNwQ3dCLE9BQU9DLElBQUksQ0FBQ0YsT0FBT2pCLEtBQUssRUFBRW9CLE9BQU8sQ0FBQ0MsQ0FBQUE7Z0JBQ2hDLElBQUlBLFlBQVlBLFNBQVNoQyxJQUFJLElBQUk7b0JBQy9CMEIsYUFBYU8sR0FBRyxDQUFDRDtnQkFDbkI7WUFDRjtRQUNGO1FBRUEsT0FBT0UsTUFBTUMsSUFBSSxDQUFDVCxjQUFjNUIsTUFBTSxDQUFDc0MsQ0FBQUEsSUFDckNBLEVBQUU3QixNQUFNLEdBQUcsTUFBTSwrQkFBK0I7WUFDaEQsQ0FBQzZCLEVBQUVDLFdBQVcsR0FBR0MsUUFBUSxDQUFDLFNBQVMsMkJBQTJCO1VBQzlEQyxLQUFLLENBQUMsR0FBRyxLQUFLLHVCQUF1QjtJQUN6QztJQUVBLG1EQUFtRDtJQUNuRCxNQUFNQywwQkFBd0Q7UUFDNUQsTUFBTUMscUJBQXFCLElBQUksQ0FBQ2hCLHFCQUFxQjtRQUNyRCxJQUFJZ0IsbUJBQW1CbEMsTUFBTSxLQUFLLEdBQUcsT0FBTztRQUU1QyxrQ0FBa0M7UUFDbEMsTUFBTW1DLGNBQWM3QixLQUFLOEIsS0FBSyxDQUFDOUIsS0FBSytCLE1BQU0sS0FBS0gsbUJBQW1CbEMsTUFBTTtRQUN4RSxNQUFNc0MsYUFBYUosa0JBQWtCLENBQUNDLFlBQVk7UUFFbEQsNEJBQTRCO1FBQzVCLE1BQU1JLGlCQUFpQixNQUFNLElBQUksQ0FBQ0MsaUJBQWlCLENBQUNGO1FBRXBELElBQUksQ0FBQ0MsZ0JBQWdCLE9BQU87UUFFNUIsSUFBSTtZQUNGLGtDQUFrQztZQUNsQyxNQUFNRSxpQkFBaUIsTUFBTSxJQUFJLENBQUNDLHdCQUF3QixDQUFDSDtZQUUzRCxPQUFPO2dCQUNMSSxJQUFJSixlQUFlSSxFQUFFO2dCQUNyQkMsaUJBQWlCTDtnQkFDakJNLG9CQUFvQkosZUFBZWhCLFFBQVE7Z0JBQzNDcUIsU0FBU0wsZUFBZUssT0FBTztnQkFDL0JDLFdBQVdUO1lBQ2I7UUFDRixFQUFFLE9BQU96QixPQUFPO1lBQ2RGLFFBQVFFLEtBQUssQ0FBQyxnQ0FBZ0NBO1lBRTlDLGlDQUFpQztZQUNqQyxPQUFPO2dCQUNMOEIsSUFBSUosZUFBZUksRUFBRTtnQkFDckJDLGlCQUFpQkw7Z0JBQ2pCTSxvQkFBb0IsSUFBSSxDQUFDRyxtQkFBbUIsQ0FBQ1Q7Z0JBQzdDTyxTQUFTO29CQUNQRyxPQUFPO29CQUNQQyxRQUFRO29CQUNSQyxXQUFXO2dCQUNiO2dCQUNBSixXQUFXVDtZQUNiO1FBQ0Y7SUFDRjtJQUVBLHNDQUFzQztJQUN0QyxNQUFjSSx5QkFBeUJVLE9BQXVCLEVBRzNEO1FBQ0QsTUFBTUMsU0FBUyxDQUFDOzs7O1FBSVosRUFBRUQsUUFBUUUsS0FBSyxDQUFDO1dBQ2IsRUFBRUYsUUFBUUcsV0FBVyxDQUFDO09BQzFCLEVBQUVILFFBQVFJLE1BQU0sQ0FBQyxFQUFFLEVBQUVKLFFBQVFLLEtBQUssQ0FBQyxDQUFDLEVBQUVMLFFBQVFNLEtBQUssQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUIzRCxDQUFDO1FBRUcsTUFBTUMsT0FBTztZQUNYLElBQU0sSUFBSSxDQUFDQyxlQUFlLENBQUNQO1lBQzNCLElBQU0sSUFBSSxDQUFDUSxrQkFBa0IsQ0FBQ1I7WUFDOUIsSUFBTSxJQUFJLENBQUNTLGFBQWEsQ0FBQ1Q7WUFDekIsSUFBTSxJQUFJLENBQUNVLGFBQWEsQ0FBQ1Y7U0FDMUI7UUFFRCxLQUFLLE1BQU1XLFdBQVdMLEtBQU07WUFDMUIsSUFBSTtnQkFDRmhELFFBQVFDLEdBQUcsQ0FBQztnQkFDWixNQUFNRSxTQUFTLE1BQU1rRDtnQkFDckIsT0FBT2xEO1lBQ1QsRUFBRSxPQUFPRCxPQUFPO2dCQUNkRixRQUFRQyxHQUFHLENBQUMsaUNBQWlDQztnQkFDN0M7WUFDRjtRQUNGO1FBRUEsTUFBTSxJQUFJb0QsTUFBTTtJQUNsQjtJQUVBLGVBQWU7SUFDZixNQUFjTCxnQkFBZ0JQLE1BQWMsRUFHekM7UUFDRCxNQUFNYSxTQUFTakYsUUFBUWtGLEdBQUcsQ0FBQ0MsZ0JBQWdCO1FBQzNDLElBQUksQ0FBQ0YsUUFBUTtZQUNYLE1BQU0sSUFBSUQsTUFBTTtRQUNsQjtRQUVBLE1BQU1JLFdBQVcsTUFBTUMsTUFBTSxnREFBZ0Q7WUFDM0VDLFFBQVE7WUFDUjdFLFNBQVM7Z0JBQ1AsZ0JBQWdCO2dCQUNoQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUV3RSxPQUFPLENBQUM7WUFDckM7WUFDQU0sTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNuQkMsT0FBTztnQkFDUEMsVUFBVTtvQkFDUjt3QkFBRUMsTUFBTTt3QkFBUUMsU0FBU3pCO29CQUFPO2lCQUNqQztnQkFDRDBCLGFBQWE7Z0JBQ2JDLFlBQVk7WUFDZDtRQUNGO1FBRUEsSUFBSSxDQUFDWCxTQUFTWSxFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJaEIsTUFBTSxDQUFDLHFCQUFxQixFQUFFSSxTQUFTYSxNQUFNLENBQUMsQ0FBQztRQUMzRDtRQUVBLE1BQU1DLE9BQU8sTUFBTWQsU0FBU2UsSUFBSTtRQUNoQyxNQUFNTixVQUFVSyxLQUFLRSxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLENBQUNSLE9BQU87UUFFL0MsSUFBSTtZQUNGLE9BQU9MLEtBQUtjLEtBQUssQ0FBQ1Q7UUFDcEIsRUFBRSxPQUFNO1lBQ04sOENBQThDO1lBQzlDLE9BQU87Z0JBQ0xyRCxVQUFVcUQsUUFBUXhGLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJO2dCQUNwQ3dELFNBQVM7b0JBQ1BHLE9BQU87b0JBQ1BDLFFBQVE7b0JBQ1JDLFdBQVc7Z0JBQ2I7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxpQ0FBaUM7SUFDakMsTUFBY1UsbUJBQW1CUixNQUFjLEVBRzVDO1FBQ0QsTUFBTWdCLFdBQVcsTUFBTUMsTUFBTSx3RUFBd0U7WUFDbkdDLFFBQVE7WUFDUjdFLFNBQVM7Z0JBQ1AsaUJBQWlCO2dCQUNqQixnQkFBZ0I7WUFDbEI7WUFDQThFLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztnQkFDbkJjLFFBQVFuQztnQkFDUlAsU0FBUztvQkFBRTJDLGdCQUFnQjtnQkFBSztZQUNsQztRQUNGO1FBRUEsSUFBSSxDQUFDcEIsU0FBU1ksRUFBRSxFQUFFLE1BQU0sSUFBSWhCLE1BQU07UUFFbEMsTUFBTWtCLE9BQU8sTUFBTWQsU0FBU2UsSUFBSTtRQUVoQyx1Q0FBdUM7UUFDdkMsSUFBSTtZQUNGLE1BQU1NLE9BQU9QLElBQUksQ0FBQyxFQUFFLEVBQUVRLGtCQUFrQjtZQUN4QyxNQUFNQyxZQUFZRixLQUFLRyxLQUFLLENBQUM7WUFDN0IsSUFBSUQsV0FBVztnQkFDYixPQUFPbkIsS0FBS2MsS0FBSyxDQUFDSyxTQUFTLENBQUMsRUFBRTtZQUNoQztRQUNGLEVBQUUsT0FBTy9FLE9BQU87WUFDZCxNQUFNLElBQUlvRCxNQUFNO1FBQ2xCO1FBRUEsTUFBTSxJQUFJQSxNQUFNO0lBQ2xCO0lBRUEsb0NBQW9DO0lBQ3BDLE1BQWNILGNBQWNULE1BQWMsRUFBZ0I7UUFDeEQsd0NBQXdDO1FBQ3hDLE1BQU0sSUFBSVksTUFBTTtJQUNsQjtJQUVBLGtDQUFrQztJQUNsQyxNQUFjRixjQUFjVixNQUFjLEVBQWdCO1FBQ3hELHdDQUF3QztRQUN4QyxNQUFNLElBQUlZLE1BQU07SUFDbEI7SUFFQSxzREFBc0Q7SUFDdEQsTUFBY3pCLGtCQUFrQkYsVUFBa0IsRUFBa0M7UUFDbEYsd0RBQXdEO1FBQ3hELE9BQU87WUFDTEssSUFBSSxJQUFJLENBQUNtRCxnQkFBZ0IsQ0FBQ3hEO1lBQzFCZ0IsT0FBTyxJQUFJLENBQUN5QyxtQkFBbUIsQ0FBQ3pEO1lBQ2hDaUIsYUFBYSxDQUFDLGdCQUFnQixFQUFFakIsV0FBVyxDQUFDO1lBQzVDa0IsUUFBUTtZQUNSQyxPQUFPO1lBQ1BDLE9BQU87WUFDUHNDLE1BQU0sSUFBSUMsT0FBT0MsV0FBVyxHQUFHNUcsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzVDNEYsUUFBUTtZQUNSaUIsTUFBTTtRQUNSO0lBQ0Y7SUFFQSwyQ0FBMkM7SUFDbkNMLGlCQUFpQi9DLFNBQWlCLEVBQVU7UUFDbEQsTUFBTThDLFFBQVE5QyxVQUFVOEMsS0FBSyxDQUFDO1FBQzlCLE9BQU9BLFFBQVFBLEtBQUssQ0FBQyxFQUFFLEdBQUc5QyxVQUFVcUQsU0FBUyxDQUFDLEdBQUc7SUFDbkQ7SUFFQSwrQ0FBK0M7SUFDdkNMLG9CQUFvQmhELFNBQWlCLEVBQVU7UUFDckQsMkJBQTJCO1FBQzNCLElBQUlPLFFBQVFQLFVBQVVsRCxPQUFPLENBQUMsbURBQW1EO1FBRWpGLGlCQUFpQjtRQUNqQixJQUFJeUQsTUFBTXRELE1BQU0sR0FBRyxLQUFLO1lBQ3RCc0QsUUFBUUEsTUFBTThDLFNBQVMsQ0FBQyxHQUFHLE1BQU07UUFDbkM7UUFFQSxPQUFPOUM7SUFDVDtJQUVBLCtCQUErQjtJQUN2Qk4sb0JBQW9CSSxPQUF1QixFQUFVO1FBQzNELE1BQU1FLFFBQVFGLFFBQVFFLEtBQUssSUFBSUYsUUFBUVQsRUFBRTtRQUV6QyxJQUFJVyxNQUFNeEIsV0FBVyxHQUFHQyxRQUFRLENBQUMsZUFBWTtZQUMzQyxPQUFPO1FBQ1QsT0FBTyxJQUFJdUIsTUFBTXhCLFdBQVcsR0FBR0MsUUFBUSxDQUFDLG1CQUFhO1lBQ25ELE9BQU87UUFDVCxPQUFPLElBQUl1QixNQUFNeEIsV0FBVyxHQUFHQyxRQUFRLENBQUMsYUFBVTtZQUNoRCxPQUFPO1FBQ1QsT0FBTyxJQUFJdUIsTUFBTXhCLFdBQVcsR0FBR0MsUUFBUSxDQUFDLFlBQVk7WUFDbEQsT0FBTztRQUNULE9BQU87WUFDTCxPQUFPLENBQUMsNEJBQTRCLEVBQUV1QixNQUFNOEMsU0FBUyxDQUFDLEdBQUcsSUFBSSxFQUFFOUMsTUFBTXRELE1BQU0sR0FBRyxLQUFLLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDbEc7SUFDRjtJQUVBLDZDQUE2QztJQUM3Q3FHLGtCQUFrQkMsV0FBNkQsRUFBb0I7UUFDakcsTUFBTUMsVUFBNEIsRUFBRTtRQUVwQyxLQUFLLE1BQU1DLGdCQUFnQixJQUFJLENBQUMxRyxVQUFVLENBQUU7WUFDMUMsSUFBSTJHLGFBQWE7WUFDakIsSUFBSUMsZ0JBQWdCO1lBQ3BCLElBQUlDLG1CQUFtQjtZQUN2QixNQUFNQyxVQUFtQyxDQUFDO1lBRTFDLEtBQUssTUFBTSxDQUFDQyxZQUFZQyxXQUFXLElBQUl4RixPQUFPeUYsT0FBTyxDQUFDVCxhQUFjO2dCQUNsRSxNQUFNVSxhQUFhUixhQUFhcEcsS0FBSyxDQUFDeUcsV0FBVztnQkFFakQsSUFBSSxDQUFDRyxjQUFjQSxlQUFlLGdCQUFhO2dCQUUvQ0w7Z0JBRUEsSUFBSU0sY0FBYztnQkFFbEIsSUFBSUgsZUFBZSxXQUFXRSxlQUFlLE9BQU87b0JBQ2xEQyxjQUFjO2dCQUNoQixPQUFPLElBQUlILGVBQWUsWUFBWUUsZUFBZSxVQUFPO29CQUMxREMsY0FBYztnQkFDaEIsT0FBTyxJQUFJSCxlQUFlLGVBQWdCRSxDQUFBQSxlQUFlLHFCQUFlQSxlQUFlLGlCQUFVLEdBQUk7b0JBQ25HQyxjQUFjO2dCQUNoQjtnQkFFQSxJQUFJQSxhQUFhO29CQUNmUjtnQkFDRixPQUFPO29CQUNMQztnQkFDRjtnQkFFQUUsT0FBTyxDQUFDQyxXQUFXLEdBQUdJO1lBQ3hCO1lBRUEsTUFBTUMsV0FBV1AsbUJBQW1CLElBQUksYUFBY0EsbUJBQW9CLE1BQU07WUFFaEYsZ0NBQWdDO1lBQ2hDLE1BQU1RLGFBQWEsSUFBSSxDQUFDQyxhQUFhLENBQUNaLGFBQWFyRyxNQUFNO1lBRXpEb0csUUFBUTdGLElBQUksQ0FBQztnQkFDWFAsUUFBUXFHLGFBQWFyRyxNQUFNO2dCQUMzQnNELE9BQU8wRCxZQUFZMUQsU0FBUztnQkFDNUJDLE9BQU95RCxZQUFZekQsU0FBUztnQkFDNUJ3RCxVQUFVNUcsS0FBSytHLEtBQUssQ0FBQ0g7Z0JBQ3JCVDtnQkFDQUM7Z0JBQ0FFO1lBQ0Y7UUFDRjtRQUVBLE9BQU9MLFFBQVFlLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFTixRQUFRLEdBQUdLLEVBQUVMLFFBQVE7SUFDdkQ7SUFFQSxnQ0FBZ0M7SUFDeEJFLGNBQWNLLFVBQWtCLEVBQTJDO1FBQ2pGLDRDQUE0QztRQUM1Qyw2QkFBNkI7UUFDN0IsT0FBTztJQUNUOzthQTNZUTNILGFBQTZCLEVBQUU7YUFDL0I0SCxlQUFzQixFQUFFOztBQTJZbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b3RpLy4vc3JjL2xpYi92b3RpbmdBbmFseXplci50cz9kMjI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnO1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVm90aW5nUmVjb3JkIHtcclxuICBkZXB1dHk6IHN0cmluZztcclxuICB2b3RlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEZXB1dHlBZmZpbml0eSB7XHJcbiAgZGVwdXR5OiBzdHJpbmc7XHJcbiAgcGFydHk6IHN0cmluZztcclxuICBzdGF0ZTogc3RyaW5nO1xyXG4gIGFmZmluaXR5OiBudW1iZXI7XHJcbiAgYWdyZWVtZW50czogbnVtYmVyO1xyXG4gIGRpc2FncmVlbWVudHM6IG51bWJlcjtcclxuICBtYXRjaGVzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBRdWVzdGlvbkRhdGEge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgb3JpZ2luYWxQcm9qZWN0OiBQcm9qZWN0RGV0YWlscztcclxuICBzaW1wbGlmaWVkUXVlc3Rpb246IHN0cmluZztcclxuICBvcHRpb25zOiB7XHJcbiAgICBmYXZvcjogc3RyaW5nO1xyXG4gICAgY29udHJhOiBzdHJpbmc7XHJcbiAgICBhYnN0ZW5jYW86IHN0cmluZztcclxuICB9O1xyXG4gIHZvdGluZ0tleTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb2plY3REZXRhaWxzIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICBhdXRob3I6IHN0cmluZztcclxuICBwYXJ0eTogc3RyaW5nO1xyXG4gIHN0YXRlOiBzdHJpbmc7XHJcbiAgZGF0ZTogc3RyaW5nO1xyXG4gIHN0YXR1czogc3RyaW5nO1xyXG4gIGxpbms6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFZvdGluZ0FuYWx5emVyIHtcclxuICBwcml2YXRlIHZvdGluZ0RhdGE6IFZvdGluZ1JlY29yZFtdID0gW107XHJcbiAgcHJpdmF0ZSBwcm9qZWN0c0RhdGE6IGFueVtdID0gW107XHJcbiAgXHJcbiAgLy8gQ2FycmVnYSBkYWRvcyBkZSB2b3Rhw6fDtWVzIGRvIENTVlxyXG4gIGFzeW5jIGxvYWRWb3RpbmdEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY3N2UGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2ltYWdlcycsICdwb2xpdGljaWFucycsICdkZXB1dGllcycsICd2b3RhY29lcyBkZXB1dGFkb3MgLSAyMDIyIGEgMjAyNS5jc3YnKTtcclxuICAgICAgY29uc3QgY3N2Q29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGNzdlBhdGgsICd1dGYtOCcpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbGluZXMgPSBjc3ZDb250ZW50LnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSk7XHJcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBsaW5lc1swXS5zcGxpdCgnLCcpLm1hcChoID0+IGgudHJpbSgpLnJlcGxhY2UoL1wiL2csICcnKSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBNYXBlYXIgZGFkb3NcclxuICAgICAgdGhpcy52b3RpbmdEYXRhID0gW107XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IHRoaXMucGFyc2VDU1ZMaW5lKGxpbmVzW2ldKTtcclxuICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPCAyKSBjb250aW51ZTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkZXB1dHkgPSBjb2x1bW5zWzBdPy5yZXBsYWNlKC9cIi9nLCAnJykgfHwgJyc7XHJcbiAgICAgICAgaWYgKCFkZXB1dHkpIGNvbnRpbnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHZvdGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTWFwZWFyIHZvdG9zIHBhcmEgY2FkYSBxdWVzdMOjb1xyXG4gICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgTWF0aC5taW4oY29sdW1ucy5sZW5ndGgsIGhlYWRlcnMubGVuZ3RoKTsgaisrKSB7XHJcbiAgICAgICAgICBjb25zdCBxdWVzdGlvbktleSA9IGhlYWRlcnNbal07XHJcbiAgICAgICAgICBjb25zdCB2b3RlID0gY29sdW1uc1tqXT8ucmVwbGFjZSgvXCIvZywgJycpIHx8ICcnO1xyXG4gICAgICAgICAgaWYgKHF1ZXN0aW9uS2V5ICYmIHZvdGUpIHtcclxuICAgICAgICAgICAgdm90ZXNbcXVlc3Rpb25LZXldID0gdm90ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy52b3RpbmdEYXRhLnB1c2goe1xyXG4gICAgICAgICAgZGVwdXR5LFxyXG4gICAgICAgICAgdm90ZXNcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYERhZG9zIGNhcnJlZ2Fkb3M6ICR7dGhpcy52b3RpbmdEYXRhLmxlbmd0aH0gZGVwdXRhZG9zYCk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjYXJyZWdhciBkYWRvczonLCBlcnJvcik7XHJcbiAgICAgIHRoaXMudm90aW5nRGF0YSA9IFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUGFyc2UgbWFudWFsIGRlIGxpbmhhIENTViAoY29uc2lkZXJhbmRvIHbDrXJndWxhcyBkZW50cm8gZGUgYXNwYXMpXHJcbiAgcHJpdmF0ZSBwYXJzZUNTVkxpbmUobGluZTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcclxuICAgIGxldCBpbnNpZGVRdW90ZXMgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGNoYXIgPSBsaW5lW2ldO1xyXG4gICAgICBcclxuICAgICAgaWYgKGNoYXIgPT09ICdcIicpIHtcclxuICAgICAgICBpbnNpZGVRdW90ZXMgPSAhaW5zaWRlUXVvdGVzO1xyXG4gICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICcsJyAmJiAhaW5zaWRlUXVvdGVzKSB7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goY3VycmVudC50cmltKCkpO1xyXG4gICAgICAgIGN1cnJlbnQgPSAnJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjdXJyZW50ICs9IGNoYXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVzdWx0LnB1c2goY3VycmVudC50cmltKCkpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vIE9idMOpbSBxdWVzdMO1ZXMgZGlzcG9uw612ZWlzIHBhcmEgbyBxdWVzdGlvbsOhcmlvXHJcbiAgZ2V0QXZhaWxhYmxlUXVlc3Rpb25zKCk6IHN0cmluZ1tdIHtcclxuICAgIGlmICh0aGlzLnZvdGluZ0RhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gW107XHJcbiAgICBcclxuICAgIGNvbnN0IGFsbFF1ZXN0aW9ucyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiB0aGlzLnZvdGluZ0RhdGEpIHtcclxuICAgICAgT2JqZWN0LmtleXMocmVjb3JkLnZvdGVzKS5mb3JFYWNoKHF1ZXN0aW9uID0+IHtcclxuICAgICAgICBpZiAocXVlc3Rpb24gJiYgcXVlc3Rpb24udHJpbSgpKSB7XHJcbiAgICAgICAgICBhbGxRdWVzdGlvbnMuYWRkKHF1ZXN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShhbGxRdWVzdGlvbnMpLmZpbHRlcihxID0+IFxyXG4gICAgICBxLmxlbmd0aCA+IDEwICYmIC8vIEZpbHRyYSBxdWVzdMO1ZXMgbXVpdG8gY3VydGFzXHJcbiAgICAgICFxLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3RvdGFsJykgLy8gUmVtb3ZlIGNvbHVuYXMgZGUgdG90YWlzXHJcbiAgICApLnNsaWNlKDAsIDIwKTsgLy8gTGltaXRhIGEgMjAgcXVlc3TDtWVzXHJcbiAgfVxyXG5cclxuICAvLyBHZXJhIHVtYSBxdWVzdMOjbyBkaW7Dom1pY2EgYmFzZWFkYSBlbSBkYWRvcyByZWFpc1xyXG4gIGFzeW5jIGdlbmVyYXRlRHluYW1pY1F1ZXN0aW9uKCk6IFByb21pc2U8UXVlc3Rpb25EYXRhIHwgbnVsbD4ge1xyXG4gICAgY29uc3QgYXZhaWxhYmxlUXVlc3Rpb25zID0gdGhpcy5nZXRBdmFpbGFibGVRdWVzdGlvbnMoKTtcclxuICAgIGlmIChhdmFpbGFibGVRdWVzdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcclxuICAgIFxyXG4gICAgLy8gU2VsZWNpb25hIHVtYSBxdWVzdMOjbyBhbGVhdMOzcmlhXHJcbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGF2YWlsYWJsZVF1ZXN0aW9ucy5sZW5ndGgpO1xyXG4gICAgY29uc3QgcHJvamVjdEtleSA9IGF2YWlsYWJsZVF1ZXN0aW9uc1tyYW5kb21JbmRleF07XHJcbiAgICBcclxuICAgIC8vIEJ1c2NhIGRldGFsaGVzIGRvIHByb2pldG9cclxuICAgIGNvbnN0IHByb2plY3REZXRhaWxzID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0RGV0YWlscyhwcm9qZWN0S2V5KTtcclxuICAgIFxyXG4gICAgaWYgKCFwcm9qZWN0RGV0YWlscykgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVXNhIEFQSSBkZSBMTE0gcGFyYSBzaW1wbGlmaWNhclxyXG4gICAgICBjb25zdCBzaW1wbGlmaWVkRGF0YSA9IGF3YWl0IHRoaXMuY2FsbExMTUZvclNpbXBsaWZpY2F0aW9uKHByb2plY3REZXRhaWxzKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IHByb2plY3REZXRhaWxzLmlkLFxyXG4gICAgICAgIG9yaWdpbmFsUHJvamVjdDogcHJvamVjdERldGFpbHMsXHJcbiAgICAgICAgc2ltcGxpZmllZFF1ZXN0aW9uOiBzaW1wbGlmaWVkRGF0YS5xdWVzdGlvbixcclxuICAgICAgICBvcHRpb25zOiBzaW1wbGlmaWVkRGF0YS5vcHRpb25zLFxyXG4gICAgICAgIHZvdGluZ0tleTogcHJvamVjdEtleVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBzaW1wbGlmaWNhciBwcm9qZXRvOicsIGVycm9yKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZhbGxiYWNrOiBzaW1wbGlmaWNhw6fDo28gYsOhc2ljYVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiBwcm9qZWN0RGV0YWlscy5pZCxcclxuICAgICAgICBvcmlnaW5hbFByb2plY3Q6IHByb2plY3REZXRhaWxzLFxyXG4gICAgICAgIHNpbXBsaWZpZWRRdWVzdGlvbjogdGhpcy5jcmVhdGVCYXNpY1F1ZXN0aW9uKHByb2plY3REZXRhaWxzKSxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICBmYXZvcjogJ/CfkY0gU291IGEgZmF2b3IgZGVzdGEgcHJvcG9zdGEnLFxyXG4gICAgICAgICAgY29udHJhOiAn8J+RjiBTb3UgY29udHJhIGVzdGEgcHJvcG9zdGEnLFxyXG4gICAgICAgICAgYWJzdGVuY2FvOiAn8J+kt+KAjeKZgu+4jyBOw6NvIHRlbmhvIGNlcnRlemEgc29icmUgZXN0YSBxdWVzdMOjbydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZvdGluZ0tleTogcHJvamVjdEtleVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ2hhbWEgQVBJIGRlIExMTSBwYXJhIHNpbXBsaWZpY2HDp8Ojb1xyXG4gIHByaXZhdGUgYXN5bmMgY2FsbExMTUZvclNpbXBsaWZpY2F0aW9uKHByb2plY3Q6IFByb2plY3REZXRhaWxzKTogUHJvbWlzZTx7XHJcbiAgICBxdWVzdGlvbjogc3RyaW5nO1xyXG4gICAgb3B0aW9uczogeyBmYXZvcjogc3RyaW5nOyBjb250cmE6IHN0cmluZzsgYWJzdGVuY2FvOiBzdHJpbmcgfTtcclxuICB9PiB7XHJcbiAgICBjb25zdCBwcm9tcHQgPSBgXHJcblZvY8OqIMOpIHVtIGFzc2lzdGVudGUgcXVlIHNpbXBsaWZpY2EgcHJvamV0b3MgZGUgbGVpIGJyYXNpbGVpcm9zIHBhcmEgbyBww7pibGljbyBnZXJhbC5cclxuXHJcblBST0pFVE86XHJcblTDrXR1bG86ICR7cHJvamVjdC50aXRsZX1cclxuRGVzY3Jpw6fDo286ICR7cHJvamVjdC5kZXNjcmlwdGlvbn1cclxuQXV0b3I6ICR7cHJvamVjdC5hdXRob3J9ICgke3Byb2plY3QucGFydHl9LyR7cHJvamVjdC5zdGF0ZX0pXHJcblxyXG5UQVJFRkE6XHJcbjEuIFRyYW5zZm9ybWUgZXN0ZSBwcm9qZXRvIGVtIHVtYSBwZXJndW50YSBzaW1wbGVzIGUgY2xhcmEgcXVlIHF1YWxxdWVyIGNpZGFkw6NvIGVudGVuZGFcclxuMi4gQ3JpZSAzIG9ww6fDtWVzIGRlIHJlc3Bvc3RhOiBhIGZhdm9yLCBjb250cmEgZSBhYnN0ZW7Dp8Ojb1xyXG5cclxuUkVHUkFTOlxyXG4tIFVzZSBsaW5ndWFnZW0gY29sb3F1aWFsIGUgYWNlc3PDrXZlbFxyXG4tIEZvcXVlIG5vIGltcGFjdG8gcmVhbCBuYSB2aWRhIGRhcyBwZXNzb2FzXHJcbi0gTWFudGVuaGEgbmV1dHJhbGlkYWRlIHBvbMOtdGljYVxyXG4tIFNlamEgb2JqZXRpdm8gZSBkaXJldG9cclxuXHJcbkZPUk1BVE8gREUgUkVTUE9TVEEgKEpTT04pOlxyXG57XHJcbiAgXCJxdWVzdGlvblwiOiBcInBlcmd1bnRhIGNsYXJhIGUgc2ltcGxlc1wiLFxyXG4gIFwib3B0aW9uc1wiOiB7XHJcbiAgICBcImZhdm9yXCI6IFwiZGVzY3Jpw6fDo28gZGEgb3DDp8OjbyBhIGZhdm9yXCIsXHJcbiAgICBcImNvbnRyYVwiOiBcImRlc2NyacOnw6NvIGRhIG9ww6fDo28gY29udHJhXCIsIFxyXG4gICAgXCJhYnN0ZW5jYW9cIjogXCJkZXNjcmnDp8OjbyBkYSBvcMOnw6NvIGRlIGFic3RlbsOnw6NvXCJcclxuICB9XHJcbn1cclxuYDtcclxuXHJcbiAgICBjb25zdCBhcGlzID0gW1xyXG4gICAgICAoKSA9PiB0aGlzLmNhbGxEZWVwU2Vla0FQSShwcm9tcHQpLFxyXG4gICAgICAoKSA9PiB0aGlzLmNhbGxIdWdnaW5nRmFjZUFQSShwcm9tcHQpLFxyXG4gICAgICAoKSA9PiB0aGlzLmNhbGxPcGVuQUlBUEkocHJvbXB0KSxcclxuICAgICAgKCkgPT4gdGhpcy5jYWxsR2VtaW5pQVBJKHByb21wdClcclxuICAgIF07XHJcblxyXG4gICAgZm9yIChjb25zdCBhcGlDYWxsIG9mIGFwaXMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGVudGFuZG8gQVBJIGRlIHNpbXBsaWZpY2HDp8Ojby4uLicpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaUNhbGwoKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEkgY2FsbCBmYWlsZWQsIHRyeWluZyBuZXh0OicsIGVycm9yKTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcignVG9kYXMgYXMgQVBJcyBkZSBMTE0gZmFsaGFyYW0nKTtcclxuICB9XHJcblxyXG4gIC8vIEFQSSBEZWVwU2Vla1xyXG4gIHByaXZhdGUgYXN5bmMgY2FsbERlZXBTZWVrQVBJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTx7XHJcbiAgICBxdWVzdGlvbjogc3RyaW5nO1xyXG4gICAgb3B0aW9uczogeyBmYXZvcjogc3RyaW5nOyBjb250cmE6IHN0cmluZzsgYWJzdGVuY2FvOiBzdHJpbmcgfTtcclxuICB9PiB7XHJcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5ERUVQU0VFS19BUElfS0VZO1xyXG4gICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEZWVwU2VlayBBUEkgbm90IGNvbmZpZ3VyZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kZWVwc2Vlay5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBtb2RlbDogJ2RlZXBzZWVrLWNoYXQnLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXHJcbiAgICAgICAgbWF4X3Rva2VuczogNTAwXHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRGVlcFNlZWsgQVBJIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyBTZSBuw6NvIGZvciBKU09OIHbDoWxpZG8sIGV4dHJhaXIgaW5mb3JtYcOnw7Vlc1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHF1ZXN0aW9uOiBjb250ZW50LnNwbGl0KCdcXG4nKVswXSB8fCAnUGVyZ3VudGEgc29icmUgcHJvamV0byBkZSBsZWknLFxyXG4gICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgIGZhdm9yOiAnU291IGEgZmF2b3IgZGVzdGEgcHJvcG9zdGEnLFxyXG4gICAgICAgICAgY29udHJhOiAnU291IGNvbnRyYSBlc3RhIHByb3Bvc3RhJyxcclxuICAgICAgICAgIGFic3RlbmNhbzogJ07Do28gdGVuaG8gY2VydGV6YSBzb2JyZSBlc3RhIHF1ZXN0w6NvJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEFQSSBkbyBIdWdnaW5nIEZhY2UgKGdyYXR1aXRhKVxyXG4gIHByaXZhdGUgYXN5bmMgY2FsbEh1Z2dpbmdGYWNlQVBJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTx7XHJcbiAgICBxdWVzdGlvbjogc3RyaW5nO1xyXG4gICAgb3B0aW9uczogeyBmYXZvcjogc3RyaW5nOyBjb250cmE6IHN0cmluZzsgYWJzdGVuY2FvOiBzdHJpbmcgfTtcclxuICB9PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS1pbmZlcmVuY2UuaHVnZ2luZ2ZhY2UuY28vbW9kZWxzL21pY3Jvc29mdC9EaWFsb0dQVC1sYXJnZScsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgaGZfZGVtbycsIC8vIFRva2VuIGRlbW8gLSBzdWJzdGl0dWEgcG9yIHVtIHJlYWwgZW0gcHJvZHXDp8Ojb1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGlucHV0czogcHJvbXB0LFxyXG4gICAgICAgIG9wdGlvbnM6IHsgd2FpdF9mb3JfbW9kZWw6IHRydWUgfVxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCdIdWdnaW5nIEZhY2UgQVBJIGZhaWxlZCcpO1xyXG4gICAgXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgXHJcbiAgICAvLyBQYXJzZSBkYSByZXNwb3N0YSBlIGV4dHJhw6fDo28gZG8gSlNPTlxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdGV4dCA9IGRhdGFbMF0/LmdlbmVyYXRlZF90ZXh0IHx8ICcnO1xyXG4gICAgICBjb25zdCBqc29uTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcclxuICAgICAgaWYgKGpzb25NYXRjaCkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIEh1Z2dpbmcgRmFjZSByZXNwb25zZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcignTm8gdmFsaWQgcmVzcG9uc2UgZnJvbSBIdWdnaW5nIEZhY2UnKTtcclxuICB9XHJcblxyXG4gIC8vIEFQSSBkbyBPcGVuQUkgKHRlbSB0aWVyIGdyYXR1aXRvKVxyXG4gIHByaXZhdGUgYXN5bmMgY2FsbE9wZW5BSUFQSShwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAvLyBJbXBsZW1lbnRhciBxdWFuZG8gdGl2ZXIgY2hhdmUgZGEgQVBJXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ09wZW5BSSBBUEkgbm90IGNvbmZpZ3VyZWQnKTtcclxuICB9XHJcblxyXG4gIC8vIEFQSSBkbyBHb29nbGUgR2VtaW5pIChncmF0dWl0YSlcclxuICBwcml2YXRlIGFzeW5jIGNhbGxHZW1pbmlBUEkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgLy8gSW1wbGVtZW50YXIgcXVhbmRvIHRpdmVyIGNoYXZlIGRhIEFQSVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdHZW1pbmkgQVBJIG5vdCBjb25maWd1cmVkJyk7XHJcbiAgfVxyXG5cclxuICAvLyBCdXNjYSBkZXRhbGhlcyBkZSB1bSBwcm9qZXRvIChtb2NrYWRvIHBvciBlbnF1YW50bylcclxuICBwcml2YXRlIGFzeW5jIGdldFByb2plY3REZXRhaWxzKHByb2plY3RLZXk6IHN0cmluZyk6IFByb21pc2U8UHJvamVjdERldGFpbHMgfCBudWxsPiB7XHJcbiAgICAvLyBQb3IgZW5xdWFudG8sIGdlcmEgZGV0YWxoZXMgYsOhc2ljb3MgYmFzZWFkb3MgbmEgY2hhdmVcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiB0aGlzLmV4dHJhY3RQcm9qZWN0SWQocHJvamVjdEtleSksXHJcbiAgICAgIHRpdGxlOiB0aGlzLmV4dHJhY3RQcm9qZWN0VGl0bGUocHJvamVjdEtleSksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBgUHJvamV0byBkZSBsZWk6ICR7cHJvamVjdEtleX1gLFxyXG4gICAgICBhdXRob3I6ICdEZXB1dGFkbyhhKScsXHJcbiAgICAgIHBhcnR5OiAnUGFydGlkbycsXHJcbiAgICAgIHN0YXRlOiAnRXN0YWRvJyxcclxuICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXHJcbiAgICAgIHN0YXR1czogJ0VtIHRyYW1pdGHDp8OjbycsXHJcbiAgICAgIGxpbms6ICcnXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0cmFpIElEIGRvIHByb2pldG8gZGEgY2hhdmUgZGUgdm90YcOnw6NvXHJcbiAgcHJpdmF0ZSBleHRyYWN0UHJvamVjdElkKHZvdGluZ0tleTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IG1hdGNoID0gdm90aW5nS2V5Lm1hdGNoKC8oPzpQTHxQTFB8UEVDfE1QVnxQREwpXFxzKltOwrpOwrBdXFxzKihcXGQrXFwvXFxkKykvaSk7XHJcbiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXSA6IHZvdGluZ0tleS5zdWJzdHJpbmcoMCwgNTApO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0cmFpIHTDrXR1bG8gZG8gcHJvamV0byBkYSBjaGF2ZSBkZSB2b3Rhw6fDo29cclxuICBwcml2YXRlIGV4dHJhY3RQcm9qZWN0VGl0bGUodm90aW5nS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgLy8gUmVtb3ZlIGRhdGEgZSB0aW1lc3RhbXBzXHJcbiAgICBsZXQgdGl0bGUgPSB2b3RpbmdLZXkucmVwbGFjZSgvXlxcZHsyfVxcL1xcZHsyfVxcL1xcZHs0fVxccytcXGR7Mn06XFxkezJ9OlxcZHsyfVxccystXFxzKy8sICcnKTtcclxuICAgIFxyXG4gICAgLy8gTGltaXRhIHRhbWFuaG9cclxuICAgIGlmICh0aXRsZS5sZW5ndGggPiAxMDApIHtcclxuICAgICAgdGl0bGUgPSB0aXRsZS5zdWJzdHJpbmcoMCwgOTcpICsgJy4uLic7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB0aXRsZTtcclxuICB9XHJcblxyXG4gIC8vIENyaWEgcGVyZ3VudGEgYsOhc2ljYSBzZW0gTExNXHJcbiAgcHJpdmF0ZSBjcmVhdGVCYXNpY1F1ZXN0aW9uKHByb2plY3Q6IFByb2plY3REZXRhaWxzKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHRpdGxlID0gcHJvamVjdC50aXRsZSB8fCBwcm9qZWN0LmlkO1xyXG4gICAgXHJcbiAgICBpZiAodGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc2Fsw6FyaW8nKSkge1xyXG4gICAgICByZXR1cm4gJ1ZvY8OqIMOpIGEgZmF2b3IgZGUgYXVtZW50YXIgbyBzYWzDoXJpbyBtw61uaW1vPyc7XHJcbiAgICB9IGVsc2UgaWYgKHRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2VkdWNhw6fDo28nKSkge1xyXG4gICAgICByZXR1cm4gJ1ZvY8OqIGFwb2lhIGludmVzdGltZW50b3MgZW0gZWR1Y2HDp8Ojbz8nO1xyXG4gICAgfSBlbHNlIGlmICh0aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzYcO6ZGUnKSkge1xyXG4gICAgICByZXR1cm4gJ1ZvY8OqIMOpIGEgZmF2b3IgZGUgbWFpcyByZWN1cnNvcyBwYXJhIGEgc2HDumRlPyc7XHJcbiAgICB9IGVsc2UgaWYgKHRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2ltcG9zdG8nKSkge1xyXG4gICAgICByZXR1cm4gJ1ZvY8OqIGNvbmNvcmRhIGNvbSBtdWRhbsOnYXMgbm9zIGltcG9zdG9zPyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gYFZvY8OqIMOpIGEgZmF2b3IgZGEgcHJvcG9zdGE6ICR7dGl0bGUuc3Vic3RyaW5nKDAsIDgwKX0ke3RpdGxlLmxlbmd0aCA+IDgwID8gJy4uLicgOiAnJ30/YDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENhbGN1bGEgYWZpbmlkYWRlIGRvIHVzdcOhcmlvIGNvbSBkZXB1dGFkb3NcclxuICBjYWxjdWxhdGVBZmZpbml0eSh1c2VyQW5zd2VyczogUmVjb3JkPHN0cmluZywgJ2Zhdm9yJyB8ICdjb250cmEnIHwgJ2Fic3RlbmNhbyc+KTogRGVwdXR5QWZmaW5pdHlbXSB7XHJcbiAgICBjb25zdCByZXN1bHRzOiBEZXB1dHlBZmZpbml0eVtdID0gW107XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgZGVwdXR5UmVjb3JkIG9mIHRoaXMudm90aW5nRGF0YSkge1xyXG4gICAgICBsZXQgYWdyZWVtZW50cyA9IDA7XHJcbiAgICAgIGxldCBkaXNhZ3JlZW1lbnRzID0gMDtcclxuICAgICAgbGV0IHRvdGFsQ29tcGFyaXNvbnMgPSAwO1xyXG4gICAgICBjb25zdCBtYXRjaGVzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9O1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBbcXVlc3Rpb25JZCwgdXNlckFuc3dlcl0gb2YgT2JqZWN0LmVudHJpZXModXNlckFuc3dlcnMpKSB7XHJcbiAgICAgICAgY29uc3QgZGVwdXR5Vm90ZSA9IGRlcHV0eVJlY29yZC52b3Rlc1txdWVzdGlvbklkXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWRlcHV0eVZvdGUgfHwgZGVwdXR5Vm90ZSA9PT0gJ07Do28gdm90b3UnKSBjb250aW51ZTtcclxuICAgICAgICBcclxuICAgICAgICB0b3RhbENvbXBhcmlzb25zKys7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGlzQWdyZWVtZW50ID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHVzZXJBbnN3ZXIgPT09ICdmYXZvcicgJiYgZGVwdXR5Vm90ZSA9PT0gJ1NpbScpIHtcclxuICAgICAgICAgIGlzQWdyZWVtZW50ID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHVzZXJBbnN3ZXIgPT09ICdjb250cmEnICYmIGRlcHV0eVZvdGUgPT09ICdOw6NvJykge1xyXG4gICAgICAgICAgaXNBZ3JlZW1lbnQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodXNlckFuc3dlciA9PT0gJ2Fic3RlbmNhbycgJiYgKGRlcHV0eVZvdGUgPT09ICdBYnN0ZW7Dp8OjbycgfHwgZGVwdXR5Vm90ZSA9PT0gJ09ic3RydcOnw6NvJykpIHtcclxuICAgICAgICAgIGlzQWdyZWVtZW50ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzQWdyZWVtZW50KSB7XHJcbiAgICAgICAgICBhZ3JlZW1lbnRzKys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRpc2FncmVlbWVudHMrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWF0Y2hlc1txdWVzdGlvbklkXSA9IGlzQWdyZWVtZW50O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBhZmZpbml0eSA9IHRvdGFsQ29tcGFyaXNvbnMgPiAwID8gKGFncmVlbWVudHMgLyB0b3RhbENvbXBhcmlzb25zKSAqIDEwMCA6IDA7XHJcbiAgICAgIFxyXG4gICAgICAvLyBCdXNjYSBpbmZvcm1hw6fDtWVzIGRvIGRlcHV0YWRvXHJcbiAgICAgIGNvbnN0IGRlcHV0eUluZm8gPSB0aGlzLmdldERlcHV0eUluZm8oZGVwdXR5UmVjb3JkLmRlcHV0eSk7XHJcbiAgICAgIFxyXG4gICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgIGRlcHV0eTogZGVwdXR5UmVjb3JkLmRlcHV0eSxcclxuICAgICAgICBwYXJ0eTogZGVwdXR5SW5mbz8ucGFydHkgfHwgJycsXHJcbiAgICAgICAgc3RhdGU6IGRlcHV0eUluZm8/LnN0YXRlIHx8ICcnLFxyXG4gICAgICAgIGFmZmluaXR5OiBNYXRoLnJvdW5kKGFmZmluaXR5KSxcclxuICAgICAgICBhZ3JlZW1lbnRzLFxyXG4gICAgICAgIGRpc2FncmVlbWVudHMsXHJcbiAgICAgICAgbWF0Y2hlc1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYi5hZmZpbml0eSAtIGEuYWZmaW5pdHkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQnVzY2EgaW5mb3JtYcOnw7VlcyBkbyBkZXB1dGFkb1xyXG4gIHByaXZhdGUgZ2V0RGVwdXR5SW5mbyhkZXB1dHlOYW1lOiBzdHJpbmcpOiB7IHBhcnR5OiBzdHJpbmc7IHN0YXRlOiBzdHJpbmcgfSB8IG51bGwge1xyXG4gICAgLy8gSW1wbGVtZW50YXIgYnVzY2Egbm9zIGRhZG9zIGRvcyBkZXB1dGFkb3NcclxuICAgIC8vIFBvciBlbnF1YW50byByZXRvcm5hIHZhemlvXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInByb21pc2VzIiwiZnMiLCJwYXRoIiwiVm90aW5nQW5hbHl6ZXIiLCJsb2FkVm90aW5nRGF0YSIsImNzdlBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImNzdkNvbnRlbnQiLCJyZWFkRmlsZSIsImxpbmVzIiwic3BsaXQiLCJmaWx0ZXIiLCJsaW5lIiwidHJpbSIsImhlYWRlcnMiLCJtYXAiLCJoIiwicmVwbGFjZSIsInZvdGluZ0RhdGEiLCJpIiwibGVuZ3RoIiwiY29sdW1ucyIsInBhcnNlQ1NWTGluZSIsImRlcHV0eSIsInZvdGVzIiwiaiIsIk1hdGgiLCJtaW4iLCJxdWVzdGlvbktleSIsInZvdGUiLCJwdXNoIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwicmVzdWx0IiwiY3VycmVudCIsImluc2lkZVF1b3RlcyIsImNoYXIiLCJnZXRBdmFpbGFibGVRdWVzdGlvbnMiLCJhbGxRdWVzdGlvbnMiLCJTZXQiLCJyZWNvcmQiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInF1ZXN0aW9uIiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwicSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzbGljZSIsImdlbmVyYXRlRHluYW1pY1F1ZXN0aW9uIiwiYXZhaWxhYmxlUXVlc3Rpb25zIiwicmFuZG9tSW5kZXgiLCJmbG9vciIsInJhbmRvbSIsInByb2plY3RLZXkiLCJwcm9qZWN0RGV0YWlscyIsImdldFByb2plY3REZXRhaWxzIiwic2ltcGxpZmllZERhdGEiLCJjYWxsTExNRm9yU2ltcGxpZmljYXRpb24iLCJpZCIsIm9yaWdpbmFsUHJvamVjdCIsInNpbXBsaWZpZWRRdWVzdGlvbiIsIm9wdGlvbnMiLCJ2b3RpbmdLZXkiLCJjcmVhdGVCYXNpY1F1ZXN0aW9uIiwiZmF2b3IiLCJjb250cmEiLCJhYnN0ZW5jYW8iLCJwcm9qZWN0IiwicHJvbXB0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImF1dGhvciIsInBhcnR5Iiwic3RhdGUiLCJhcGlzIiwiY2FsbERlZXBTZWVrQVBJIiwiY2FsbEh1Z2dpbmdGYWNlQVBJIiwiY2FsbE9wZW5BSUFQSSIsImNhbGxHZW1pbmlBUEkiLCJhcGlDYWxsIiwiRXJyb3IiLCJhcGlLZXkiLCJlbnYiLCJERUVQU0VFS19BUElfS0VZIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwib2siLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsImNob2ljZXMiLCJtZXNzYWdlIiwicGFyc2UiLCJpbnB1dHMiLCJ3YWl0X2Zvcl9tb2RlbCIsInRleHQiLCJnZW5lcmF0ZWRfdGV4dCIsImpzb25NYXRjaCIsIm1hdGNoIiwiZXh0cmFjdFByb2plY3RJZCIsImV4dHJhY3RQcm9qZWN0VGl0bGUiLCJkYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibGluayIsInN1YnN0cmluZyIsImNhbGN1bGF0ZUFmZmluaXR5IiwidXNlckFuc3dlcnMiLCJyZXN1bHRzIiwiZGVwdXR5UmVjb3JkIiwiYWdyZWVtZW50cyIsImRpc2FncmVlbWVudHMiLCJ0b3RhbENvbXBhcmlzb25zIiwibWF0Y2hlcyIsInF1ZXN0aW9uSWQiLCJ1c2VyQW5zd2VyIiwiZW50cmllcyIsImRlcHV0eVZvdGUiLCJpc0FncmVlbWVudCIsImFmZmluaXR5IiwiZGVwdXR5SW5mbyIsImdldERlcHV0eUluZm8iLCJyb3VuZCIsInNvcnQiLCJhIiwiYiIsImRlcHV0eU5hbWUiLCJwcm9qZWN0c0RhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/votingAnalyzer.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdynamic-questions%2Froute&page=%2Fapi%2Fdynamic-questions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamic-questions%2Froute.ts&appDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLucas%5CDesktop%5CWorkspace%5CV%C3%B4ti&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();